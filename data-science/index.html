<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Working with data &mdash; Julia for high-performance scientific computing</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_lesson.css" type="text/css" />
      <link rel="stylesheet" href="../_static/overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/togglebutton.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/minipres.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Writing performant Julia code" href="../performant-code/" />
    <link rel="prev" title="Developing in Julia" href="../development/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../" class="icon icon-home"> Julia for high-performance scientific computing
            <img src="../_static/ENCCS.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The lesson</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../motivation/">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/">Special features of Julia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/">Developing in Julia</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Working with data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#download-a-dataset">Download a dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataframes">Dataframes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#machine-learning-in-julia">Machine learning in Julia</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#traditional-machine-learning">Traditional machine learning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flux-jl">Flux.jl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#training-a-model">Training a model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exercises">Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../performant-code/">Writing performant Julia code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parallelization/">Parallelization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GPU/">GPU programming</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../setup/">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor’s guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Julia for high-performance scientific computing</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
      <li>Working with data</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wikfeldt/julia-for-scicomp/blob/master/content/data-science.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="working-with-data">
<h1>Working with data<a class="headerlink" href="#working-with-data" title="Permalink to this headline"></a></h1>
<div class="admonition-questions questions admonition">
<p class="admonition-title">Questions</p>
<ul class="simple">
<li><p>How can I manipulate and wrangle data in Julia?</p></li>
<li><p>What packages exist?</p></li>
</ul>
</div>
<div class="admonition-objectives objectives admonition">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Learn to efficiently use data frames</p></li>
<li><p>Learn some good practices around tidy data</p></li>
</ul>
</div>
<p>Julia is a good language to use for data science problems.
It will perform well, alleviating the need to translate
computationally demanding parts to another language, and its
ecosystem of libraries for data science and machine learning
problems is mature and user friendly.</p>
<p>In this episode we will learn how to work with data using
the DataFrames package and get a flavor for how to set up a
deep learning workflow using the Flux package.</p>
<div class="section" id="download-a-dataset">
<h2>Download a dataset<a class="headerlink" href="#download-a-dataset" title="Permalink to this headline"></a></h2>
<p>We start by downloading a dataset containing measurements
of characteristic features of different penguin species.</p>
<div class="figure align-center" id="id3">
<img alt="../_images/lter_penguins.png" src="../_images/lter_penguins.png" />
<p class="caption"><span class="caption-text">Artwork by &#64;allison_horst</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</div>
<p>To obtain the data we simply add the PalmerPenguins package.</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;PalmerPenguins&quot;</span><span class="p">)</span>
<span class="k">using</span> <span class="n">PalmerPenguins</span>
</pre></div>
</div>
</div>
<div class="section" id="dataframes">
<h2>Dataframes<a class="headerlink" href="#dataframes" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://dataframes.juliadata.org/stable/">DataFrames.jl</a>
package is Julia’s version of the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> library in Python and
the <code class="docutils literal notranslate"><span class="pre">data.frame()</span></code> function in R. We will use it here to
analyze the penguins dataset, but first we need to install it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;DataFrames&quot;</span><span class="p">)</span>
<span class="n">using</span> <span class="n">DataFrames</span>
</pre></div>
</div>
<div class="admonition-dataframes type-along important admonition">
<p class="admonition-title">Dataframes</p>
<p>A dataframe is a 2-dimensional table of rows and columns, much
like a Excel spreadsheet. The rows usually represent independent
observations, while the columns represent the
features (variables) for each observation. Just like in Python and R,
the DataFrames.jl package provides functionality for data
manipulation and analysis.
Here’s how you can create a new dataframe:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">DataFrames</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Ali&quot;</span><span class="p">,</span> <span class="s">&quot;Clara&quot;</span><span class="p">,</span> <span class="s">&quot;Jingfei&quot;</span><span class="p">,</span> <span class="s">&quot;Stefan&quot;</span><span class="p">]</span>
<span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;25&quot;</span><span class="p">,</span> <span class="s">&quot;39&quot;</span><span class="p">,</span> <span class="s">&quot;64&quot;</span><span class="p">,</span> <span class="s">&quot;45&quot;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(;</span> <span class="n">name</span><span class="o">=</span><span class="n">names</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="n">age</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>4×2 DataFrame
 Row │ first_name  age
     │ String      String
 ────┼────────────────────
   1 │ Ali         25
   2 │ Clara       39
   3 │ Jingfei     64
   4 │ Stefan      45
</pre></div>
</div>
</div>
<p>We now create a dataframe containing the PalmerPenguins dataset:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="o">=</span> <span class="n">PalmerPenguins</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

<span class="c"># the raw data can be loaded by</span>
<span class="c">#tableraw = PalmerPenguins.load(; raw = true)</span>

<span class="n">first</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>344×7 DataFrame
 Row │ species    island     bill_length_mm  bill_depth_mm  flipper_length_mm  body_mass_g  sex
     │ String     String     Float64?        Float64?       Int64?             Int64?       String?
─────┼──────────────────────────────────────────────────────────────────────────────────────────────
   1 │ Adelie   Torgersen            39.1           18.7                181         3750  male
   2 │ Adelie   Torgersen            39.5           17.4                186         3800  female
   3 │ Adelie   Torgersen            40.3           18.0                195         3250  female
   4 │ Adelie   Torgersen       missing        missing              missing      missing  missing
   5 │ Adelie   Torgersen            36.7           19.3                193         3450  female
</pre></div>
</div>
<p>We can inspect the data using a few basic operations:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># slicing</span>
<span class="n">df</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span><span class="mi">3</span><span class="p">]</span>

<span class="c"># slicing and column name (can also use &quot;island&quot;)</span>
<span class="n">df</span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span><span class="mi">100</span><span class="p">,</span> <span class="ss">:island</span><span class="p">]</span>

<span class="c"># dot syntax (editing will change the dataframe)</span>
<span class="n">df</span><span class="o">.</span><span class="n">species</span>

<span class="c"># get a copy of a column</span>
<span class="n">df</span><span class="p">[</span><span class="o">:</span><span class="p">,</span> <span class="p">[</span><span class="ss">:sex</span><span class="p">,</span> <span class="ss">:body_mass_g</span><span class="p">]]</span>

<span class="c"># access column directly without copying (editing will change the dataframe)</span>
<span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">,</span> <span class="ss">:bill_length_mm</span><span class="p">]</span>

<span class="c"># get size</span>
<span class="n">size</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="n">ncol</span><span class="p">(</span><span class="n">df</span><span class="p">),</span> <span class="n">nrow</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c"># find unique species</span>
<span class="n">unique</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">species</span><span class="p">)</span>

<span class="c"># names of columns</span>
<span class="n">names</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<p>Summary statistics can be displayed with the <code class="docutils literal notranslate"><span class="pre">describe</span></code> function:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">describe</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>7×7 DataFrame
 Row │ variable           mean     min     median  max        nmissing  eltype
     │ Symbol             Union…   Any     Union…  Any        Int64     Type
─────┼──────────────────────────────────────────────────────────────────────────────────────────
   1 │ species                     Adelie          Gentoo            0  String
   2 │ island                      Biscoe          Torgersen         0  String
   3 │ bill_length_mm     43.9219  32.1    44.45   59.6              2  Union{Missing, Float64}
   4 │ bill_depth_mm      17.1512  13.1    17.3    21.5              2  Union{Missing, Float64}
   5 │ flipper_length_mm  200.915  172     197.0   231               2  Union{Missing, Int64}
   6 │ body_mass_g        4201.75  2700    4050.0  6300              2  Union{Missing, Int64}
   7 │ sex                         female          male             11  Union{Missing, String}
</pre></div>
</div>
<p>The main features we are interested in for each penguin observation are
<cite>bill_length_mm</cite>, <cite>bill_depth_mm</cite>, <cite>flipper_length_mm</cite> and <cite>body_mass_g</cite>.
What the first three features mean is illustrated in the picture below.</p>
<div class="figure align-center" id="id4">
<img alt="../_images/culmen_depth.png" src="../_images/culmen_depth.png" />
<p class="caption"><span class="caption-text">Artwork by &#64;allison_horst</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</div>
<p>We can see in the output of <code class="docutils literal notranslate"><span class="pre">describe</span></code> that the element type of
all the columns is a union of <code class="docutils literal notranslate"><span class="pre">missing</span></code> and a numeric type. This
implies that our dataset contains missing values.</p>
<p>We can remove these by the <code class="docutils literal notranslate"><span class="pre">dropmissing</span></code> or <code class="docutils literal notranslate"><span class="pre">dropmissing!</span></code> functions
(what is the difference between them?):</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">dropmissing!</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="plotting">
<h2>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline"></a></h2>
<p>Let us now look at different ways to visualize this data.
Many different plotting libraries exist for Julia and which
one to use will depend on the specific use case as well as
personal preference.</p>
<div class="admonition-some-plotting-packages-in-julia callout admonition">
<p class="admonition-title">Some plotting packages in Julia</p>
<ul class="simple">
<li><p><a class="reference external" href="http://docs.juliaplots.org/latest/">Plots.jl</a>: high-level
API for working with several different plotting back-ends, including <cite>GR</cite>,
<cite>Matplotlib.Pyplot</cite>, <cite>Plotly</cite> and <cite>PlotlyJS</cite>.</p></li>
<li><p><a class="reference external" href="https://github.com/JuliaPlots/StatsPlots.jl">StatsPlots.jl</a>: was moved
out from core <cite>Plots.jl</cite>. Focuses on statistical use-cases and supports
specialized statistical plotting functionalities.</p></li>
<li><p><a class="reference external" href="http://gadflyjl.org/stable/">GadFly.jl</a>: based largely on
<a class="reference external" href="https://ggplot2.tidyverse.org/">ggplot2 for R</a> and the book
<a class="reference external" href="https://www.cs.uic.edu/~wilkinson/TheGrammarOfGraphics/GOG.html">The Grammar of Graphics</a>.
Well suited for statistics and machine learning.</p></li>
<li><p><a class="reference external" href="https://www.queryverse.org/VegaLite.jl/stable/">VegaLite.jl</a>: based on
<a class="reference external" href="https://vega.github.io/vega-lite/">Vega-Lite</a>, a grammar of interactive graphics.
Great for interactive graphics.</p></li>
<li><p><a class="reference external" href="https://makie.juliaplots.org/stable/">Makie.jl</a> data visualization ecosystem with backends
<cite>GLMakie.jl</cite> (OpenCL), <cite>CairoMakie.jl</cite> (Cairo) and <cite>WGLMakie.jl</cite> (WebGL).
Good for publication-quality plotting but can be a bit slow to load and use.</p></li>
</ul>
</div>
<p>We will be using <cite>Plots.jl</cite> and <cite>StatsPlots.jl</cite> but we encourage to explore these
other packages to find the one that best fits your use case.</p>
<p>First we install <cite>Plots.jl</cite> and <cite>StatsPlots</cite> backend:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;Plots&quot;</span><span class="p">)</span>
<span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;StatsPlots&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here’s how a simple line plot works:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">Plots</span>
<span class="n">gr</span><span class="p">()</span>  <span class="c"># set the backend to GR</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="o">:</span><span class="mi">10</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Two Lines&quot;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Line 1&quot;</span> <span class="s">&quot;Line 2&quot;</span><span class="p">],</span> <span class="n">lw</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>In VSCode, the plot should appear in a new plot pane.
We can add labels:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">xlabel!</span><span class="p">(</span><span class="s">&quot;x label&quot;</span><span class="p">)</span>
<span class="n">ylabel!</span><span class="p">(</span><span class="s">&quot;y label&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To add a line to an existing plot, we mutate it with <code class="docutils literal notranslate"><span class="pre">plot!</span></code>:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plot!</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally we can save to the plot to a file:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">savefig</span><span class="p">(</span><span class="s">&quot;myplot.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Multiple subplots can be created by:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">p1</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="c"># Make a line plot</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="c"># Make a scatter plot</span>
<span class="n">p3</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xlabel</span> <span class="o">=</span> <span class="s">&quot;This one is labelled&quot;</span><span class="p">,</span> <span class="n">lw</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Subtitle&quot;</span><span class="p">)</span>
<span class="n">p4</span> <span class="o">=</span> <span class="n">histogram</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="c"># Four histograms each with 10 points? Why not!</span>
<span class="n">plot</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">,</span> <span class="n">layout</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">legend</span> <span class="o">=</span> <span class="nb">false</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-visualizing-the-penguin-dataset type-along important admonition">
<p class="admonition-title">Visualizing the Penguin dataset</p>
<p>First we make sure to have the packages installed and set the backend to GR:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">Pkg</span>
<span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Plots&quot;</span><span class="p">)</span>
<span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;StatsPlots&quot;</span><span class="p">)</span>
<span class="n">gr</span><span class="p">()</span>
</pre></div>
</div>
<p>For the Penguin dataset it is more appropriate to use scatter plots, for example:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">,</span> <span class="ss">:bill_length_mm</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">,</span> <span class="ss">:bill_depth_mm</span><span class="p">])</span>
</pre></div>
</div>
<p>We can adjust the markers by <a class="reference external" href="https://juliagraphics.github.io/Colors.jl/stable/namedcolors/">this list of named colors</a>
and <a class="reference external" href="https://docs.juliaplots.org/latest/generated/unicodeplots/#unicodeplots-ref13">this list of marker types</a>:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">,</span> <span class="ss">:bill_length_mm</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">,</span> <span class="ss">:bill_depth_mm</span><span class="p">],</span> <span class="n">marker</span> <span class="o">=</span> <span class="ss">:hexagon</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="ss">:magenta</span><span class="p">)</span>
</pre></div>
</div>
<p>We can also change the plot theme according to <a class="reference external" href="https://docs.juliaplots.org/latest/generated/plotthemes/">this list of themes</a>,
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">theme</span><span class="p">(:</span><span class="n">dark</span><span class="p">)</span>
<span class="c1"># then re-execute the scatter function</span>
</pre></div>
</div>
<p>We can add a dimension to the plot by grouping by another column. Let’s see if
the different penguin species can be distiguished based on their bill length
and bill depth. We also set different marker shapes and colors based on the
grouping, and adjust the markersize and transparency (<code class="docutils literal notranslate"><span class="pre">alpha</span></code>):</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">,</span> <span class="ss">:bill_length_mm</span><span class="p">],</span>
        <span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">,</span> <span class="ss">:bill_depth_mm</span><span class="p">],</span>
        <span class="n">xlabel</span> <span class="o">=</span> <span class="s">&quot;bill length (mm)&quot;</span><span class="p">,</span>
        <span class="n">ylabel</span> <span class="o">=</span> <span class="s">&quot;bill depth (g)&quot;</span><span class="p">,</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">!</span><span class="p">,</span> <span class="ss">:species</span><span class="p">],</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:circle</span> <span class="ss">:ltriangle</span> <span class="ss">:star5</span><span class="p">],</span>
        <span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:magenta</span> <span class="ss">:springgreen</span> <span class="ss">:yellow</span><span class="p">],</span>
        <span class="n">markersize</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.8</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">scatter</span></code> function comes from the base <cite>Plots</cite> package. <cite>StatsPlots</cite> provides
many other types of plot types, for example <code class="docutils literal notranslate"><span class="pre">density</span></code>. To use dataframes with <cite>StatsPlots</cite>
we need to use the <code class="docutils literal notranslate"><span class="pre">&#64;df</span></code> macro which allows passing columns as symbols (this can also be used
for <code class="docutils literal notranslate"><span class="pre">scatter</span></code> and other plot functions):</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@df</span> <span class="n">df</span> <span class="n">density</span><span class="p">(</span><span class="ss">:flipper_length_mm</span><span class="p">,</span>
               <span class="n">xlabel</span> <span class="o">=</span> <span class="s">&quot;flipper length (mm)&quot;</span><span class="p">,</span>
               <span class="n">group</span> <span class="o">=</span> <span class="ss">:species</span><span class="p">,</span>
               <span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:magenta</span> <span class="ss">:springgreen</span> <span class="ss">:yellow</span><span class="p">],</span>
               <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="machine-learning-in-julia">
<h2>Machine learning in Julia<a class="headerlink" href="#machine-learning-in-julia" title="Permalink to this headline"></a></h2>
<p>Despite being a relatively new language, Julia already has a strong and rapidly expanding
ecosystem of libraries for machine learning and deep learning. A fundamental advantage of Julia for ML
that it solves the two-language problem - there is no need for different languages for the
user-facing framework and the backend heavy-lifting (like for most other DL frameworks).</p>
<p>A particular focus in the Julia approach to ML is <a class="reference external" href="https://sciml.ai/">“scientific machine learning” (SciML)</a>
(a.k.a. physics-informed learning), i.e. machine learning which incorporates scientific models into
the learning process instead of relying only on data. The core principle of SciML is <cite>differentiable
programming</cite> - the ability to automatically differentiate any code and thus incorporate it into
Flux models.</p>
<p>However, Julia is still behind frameworks like PyTorch and Tensorflow/Keras in terms of documentation and API design.</p>
<div class="section" id="traditional-machine-learning">
<h3>Traditional machine learning<a class="headerlink" href="#traditional-machine-learning" title="Permalink to this headline"></a></h3>
<p>Julia has packages for traditional (non-deep) machine learning:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://scikitlearnjl.readthedocs.io/en/latest/">ScikitLearn.jl</a> is a port of the popular Python package.</p></li>
<li><p><a class="reference external" href="https://alan-turing-institute.github.io/MLJ.jl/dev/">MLJ.jl</a> provides a common interface
and meta-algorithms for selecting, tuning, evaluating, composing and comparing over 150 machine learning models.</p></li>
</ul>
</div>
<div class="section" id="flux-jl">
<h3>Flux.jl<a class="headerlink" href="#flux-jl" title="Permalink to this headline"></a></h3>
<p>Flux comes “batteries-included” with many useful tools built in, but also enables the user to
write own Julia code for DL components.</p>
<ul class="simple">
<li><p>Flux has relatively few explicit APIs for features like regularisation or embeddings.</p></li>
<li><p>All of Flux is straightforward Julia code and. It can be worth to inspect it build own parts if needed.</p></li>
<li><p>Flux works well with other Julia libraries, like dataframes, images and differential equation solvers.
One can build complex data processing pipelines that integrate Flux models.</p></li>
</ul>
<div class="section" id="training-a-model">
<h4>Training a model<a class="headerlink" href="#training-a-model" title="Permalink to this headline"></a></h4>
<p>To train a model we need four things:</p>
<ul class="simple">
<li><p>A objective function, that evaluates how well a model is doing given
some input data.</p></li>
<li><p>The trainable parameters of the model.</p></li>
<li><p>A collection of data points that will be provided to the objective
function.</p></li>
<li><p>An optimiser that will update the model parameters appropriately.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline"></a></h2>
<div class="admonition-create-a-custom-plotting-function exercise important admonition">
<p class="admonition-title">Create a custom plotting function</p>
<p>Convert the final <code class="docutils literal notranslate"><span class="pre">scatter</span></code> plot in the type-along section “Visualizing the Penguin dataset”
and convert it into a <code class="docutils literal notranslate"><span class="pre">create_scatterplot</span></code> function:</p>
<ul class="simple">
<li><p>The function should take as arguments a dataframe and two column symbols.</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">minimum()</span></code> and <code class="docutils literal notranslate"><span class="pre">maximum()</span></code> functions to automatically set the x-range of the plot
using the <code class="docutils literal notranslate"><span class="pre">xlim</span> <span class="pre">=</span> <span class="pre">(xmin,</span> <span class="pre">xmax)</span></code> argument to <code class="docutils literal notranslate"><span class="pre">scatter()</span></code>.</p></li>
<li><p>If you have time, try grouping the data by <code class="docutils literal notranslate"><span class="pre">:island</span></code> or <code class="docutils literal notranslate"><span class="pre">:sex</span></code> instead of <code class="docutils literal notranslate"><span class="pre">:species</span></code>
(keep in mind that you may need to adjust the number of marker symbols and colors).</p></li>
<li><p>If you have more time, play around with the plot appearance using <code class="docutils literal notranslate"><span class="pre">theme()</span></code> and the marker symbols and colors.</p></li>
</ul>
<div class="admonition-solution solution important dropdown admonition">
<p class="admonition-title">Solution</p>
<p>WRITEME</p>
</div>
</div>
<div class="admonition-exercise exercise important admonition">
<p class="admonition-title">Exercise</p>
<p>Start from the neural network we trained to identify penguins, and try adding
the following layers one by one and see if the predictive ability improves:</p>
<ul class="simple">
<li><p>dense layer</p></li>
<li><p>…</p></li>
</ul>
</div>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline"></a></h2>
<ul>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=q_P2H_ZXVxI">Best Julia Data Manipulation packages combo 2020-09</a></p></li>
<li><p>Many interesting datasets are available in Julia through the
<a class="reference external" href="https://github.com/JuliaStats/RDatasets.jl">RDatasets</a> package.
For instance:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;RDatasets&quot;</span><span class="p">)</span>
<span class="k">using</span> <span class="n">RDatasets</span>
<span class="c"># load a couple of datasets</span>
<span class="n">iris</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">(</span><span class="s">&quot;datasets&quot;</span><span class="p">,</span> <span class="s">&quot;iris&quot;</span><span class="p">)</span>
<span class="n">neuro</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">(</span><span class="s">&quot;boot&quot;</span><span class="p">,</span> <span class="s">&quot;neuro&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><a href="#id1"><span class="problematic" id="id2">`</span></a>”The Future of Machine Learning and why it looks a lot like Julia” by Logan Kilpatrick &lt;<a class="reference external" href="https://towardsdatascience.com/the-future-of-machine-learning-and-why-it-looks-a-lot-like-julia-a0e26b51f6a6">https://towardsdatascience.com/the-future-of-machine-learning-and-why-it-looks-a-lot-like-julia-a0e26b51f6a6</a>&gt;_</p></li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../development/" class="btn btn-neutral float-left" title="Developing in Julia" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../performant-code/" class="btn btn-neutral float-right" title="Writing performant Julia code" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, EuroCC National Competence Center Sweden.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>